\subsection{Characterization of sub-wavelength grating}\label{sec:grating_characterization}

The sub-wavelength gratings, or Fano mirrors, used in this project are commercially available high-quality silicon nitride ($SiN$) membranes suspended on a silicon ($Si$) frame, which have been patterned into a grating. Figure \ref{fig:packaged_membrane} shows a packaged membrane from Norcada, the company that provided all the gratings/membranes used in this project. Figure \ref{fig:membrane_closeup} is a close-up picture of a bare membrane that has not yet been patterned, and includes a scale to provide perspective regarding the physical dimensions.

\begin{figure}[h!]
    \centering
    \begin{subfigure}[b]{0.35\textwidth}
        \includegraphics[width=\textwidth]{figures/packaged_membrane_picture.png}
        \caption{}
        \label{fig:packaged_membrane}
    \end{subfigure}
    \hspace{1cm}
    \begin{subfigure}[b]{0.35\textwidth}
        \includegraphics[width=\textwidth]{figures/membrane_picture.png}
        \caption{}
        \label{fig:membrane_closeup}
    \end{subfigure}
    \caption{(a) shows an image of a packaged bare membrane, which has not been patterned, from Norcada. (b) is a close-up image of a bare membrane like the one in figure \ref{fig:packaged_membrane}.}
    \label{fig:membrane_pictures}
\end{figure}

The patterned area of the Fano mirrors used throughout this project is $400$ x $400 \mu m$, and this, along with detailed dimensions of the whole membrane, is sketched in figure \ref{fig:grating_sketch}.

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.6\textwidth]{figures/grating_sketch.pdf}
    \caption{A simple sketch of the profile of a patterned membrane, i.e. a Fano mirror. It can be seen that the width of the patterned area is $400\mu m$.}
    \label{fig:grating_sketch}
\end{figure}

\newpage
\subsubsection{The alignment procedure}\label{sec:alignment}

In order to align the Fano mirror for optical characterization, the setup used is a simplified one compared to the double Fano cavity setup shown in figure \ref{fig:cavity_setup}. This setup corresponds to one where only the \emph{bottom} part is included, i.e. the part highlighted in figure \ref{fig:setup_bottom}. It must be noted here that if the purpose of the Fano mirror alignment is to create a cavity, the top part shown in figure \ref{fig:setup_top} must of course be used as well. 

The goal of the alignment procedure is to ensure that the coupling between the guided-mode and the mode of the laser is maximized, as outlined in section \ref{sec:fano_mirror}. The transmission of the Fano mirror is measured during alignment with a \emph{PM100D} digital handheld optical power meter from Thorlabs\cite{power_meter}, and the progress of the alignment procedure is understood as minimizing the transmission. The behavior of the Fano mirror transmission, when perfectly aligned, can be seen in figure \ref{fig:lossy_grating_spectrum}, where it has been simulated for a Fano mirror with arbitrary physical parameters. When aligned, the guided-mode resonance wavelength can thus be found. This is practically done by scanning the expected wavelength range using the Toptica laser and recording the wavelength at which the transmission is minimized.  

The three degrees of freedom, in which the alignment of the Fano mirror is optimized, are the translational coordinates ($x$, $y$), the rotational degree of freedom, and the two angular degrees of freedom. At this point, it is assumed, that the waist of the beam incident on the Fano mirror is optimal; this will be expanded upon in section \ref{sec:beam_waist}.

The general order in which the alignment is done is given as:
\begin{enumerate}
    \item xy-plane alignment. 
    \item Alignment of the angular degrees of freedom (adjusting the kinematic mirror mount).
    \item Rotational alignment (adjusting the HWP placed prior to the cavity setup).
\end{enumerate}

\subsubsection*{xy-plane alignment}
The translational alignement of the Fano mirror in the xy-plane is simply done by movement of the xy-stages (linear $\mu m$-stages from Thorlabs) shown in figure \ref{fig:cavity_setup}. Here it is crucial to know how the transmission level behaves qualitatively as a function of the xy-positions when the wavelength of the laser is off-resonance with respect to the guided-mode of the Fano mirror. Due to the effective thickness of the membrane in patterned and unpatterned areas being different, the transmission properties will vary slightly. This can be utilized in order to align these parameters effectively. Assuming one of the coordinates, $x$ or $y$, is optimal, and the other is scanned as shown in figure \ref{fig:xy_alignment_sketch}, it will be evident that the transmission remains constant when the entire beam is incident on the bare membrane. However, a slight change is measured in the patterned area, simply due to the changed effective thickness of the structure in this area. 

\begin{figure}[h!]
    \centering 
    \includegraphics[width=0.3\textwidth]{figures/xy_alignment_sketch.pdf}
    \caption{Simple sketch of a patterned membrane, i.e. a Fano mirror. The darker area surrounding the $SiN$ membrane is the $Si$ frame and the dark blue lines in the center indicate the $400$ x $400 \mu m$ patterned area. The black dotted arrow is indicates scanning across the membrane, by moving it relative to the beam, using one of the linear stages.}
    \label{fig:xy_alignment_sketch}
\end{figure}

\newpage
\subsubsection*{Angular alignment}
Adjusting the angular alignment, which is achieved by turning the screws on the kinematic mirror mount that holds the piezo ring and the Macor membrane holder, is crucial for the evaluation of the guided-mode resonance wavelength. As reported by Parthenopoulos et al. in \cite{Parthenopoulos}, the resonance wavelength of the guided-mode depends strongly on the angle of incidence. 

In figure \ref{fig:setup_sketch} the components $I_{1-4}$ indicate apertures (irises) used for the angular alignment. Specifically, $I_1$ and $I_2$ are used to track the back-reflection of the beam incident on the Fano mirror to ensure as much overlap as possible. A complete overlap indicates that the incident beam is normal to the Fano mirror surface. 

\subsubsection*{Rotational alignment}
The Fano mirrors provided by Norcada are designed to be used as so-called $TM_0$ wave-guides. This means that the guided-mode resonance we wish to study is spectrally located inside the available wavelength range for an electric field polarized perpendicular to the grating lines. The polarization is thus an important parameter in order to achieve a maximized interaction between the laser and the Fano mirror\cite{Sadov}.

For this reason, the rotational alignment is vital in order to achieve the correct minimum transmission wavelength of the Fano mirror. 

Since no rotational degree of freedom is assigned to the Fano mirror itself, and that this would greatly complicate the alignment procedure, the rotational alignment is achieved by changing the polarization of the incident light. This is done by adjusting the rotating HWP placed immediately before the light is incident on the Fano mirror surface which is possible due to its effect on linearly polarized light, illustrated in figure \ref{fig:HWP}.

\subsubsection{Adjusting and measuring the beam waist}\label{sec:beam_waist}

In section \ref{sec:alignment}, we assumed an optimal beam waist. This was due to the fact that beam waist optimization is unnecessary unless the entire setup is rebuilt or the size of the Fano mirror is changed. Since the patterned area of the Fano mirrors characterized in this project was only $400$ x $400 \mu m$, the beam waist optimization was only done once.

As is evident from figure \ref{fig:telescope}, an optical telescope was utilized to tune the waist size $w_0$ of the collimated beam. In order to determine the optimal value of $w_0$, the second lens $L_2$ was moved back and forth without diverging from the position where the optical axis passed through the center of the lens. The minimum transmission was then recorded for each iteration until the transmission converged. When the minimum transmission as a function of $w_0$ was found, this was measured using the \emph{razor blade method}. The razor blade method is a simple tool to measure the beam waist of a Gaussian laser beam by \emph{cutting} the beam gradually with a sharp blade. The distance the blade moves is recorded along with the transmitted intensity, and the two are thus directly correlated\cite{Forster}.

An arbitrary Gaussian distribution, corresponding to a laser beam in the TEM00 mode, is shown in figure \ref{fig:arb_gaussian}, while figure \ref{fig:razor_blade} shows the integral of the distribution as a function of the razor blade position, which corresponds to an error function. 

\begin{figure}[h!]
    \centering
    \begin{subfigure}[b]{0.49\textwidth}
        \includegraphics[width=\textwidth]{figures/arbitrary_gaussian.pdf}
        \caption{}
        \label{fig:arb_gaussian}
    \end{subfigure}
    \begin{subfigure}[b]{0.49\textwidth}
        \includegraphics[width=\textwidth]{figures/razor_blade_err_function.pdf}
        \caption{}
        \label{fig:razor_blade}
    \end{subfigure}
    \caption{(a) shows an arbitrary Gaussian distribution, where the red dashed line indicates the position of the maximum value. (b) shows the transmitted intensity as a function of the position of the razor blade, as the razor blade method is simulated, i.e. the beam is gradually covered with the blade.}
    \label{fig:razor_blade_method}
\end{figure}

In practice, the blade position was recorded by counting the turns made on a linear $\mu m$-stage with the razor blade attached, and the transmitted intensity was recorded live by a power meter from Thorlabs. The power of the laser beam without being \emph{cut} by the blade, was tuned to $\sim 1 mW$ such that the percentile change was intuitively recorded. The linewidth of the Gaussian beam is then approximately given as the distance between the two cutoff points where the transmitted intensity is given as $16\%$ and $84\%$. The optimal value for the beam waist was found to be
\begin{equation}
    \delta \lambda_{400 \mu m} \approx 160 \mu m.
\end{equation}

\subsubsection{Obtaining normalized transmission/reflection spectra}

When the Fano mirror and the surrounding setup are completely aligned, it is time for the optical characterization. A series of measurements is necessary to obtain normalized transmission and reflection spectra that rightfully represent the optical properties of the Fano mirror. 

The structure of such measurements is given as follows: 
\begin{enumerate}
    \item The transmission and reflection intensities as a function of the wavelength are measured using the reflection detector $P_R$ and the transmission detector $P_T$, while the signal measured in detector $P_I$ is recorded as a reference measurement. The positions of all detectors are shown in figure \ref{fig:setup_sketch}. 
    \item The Fano mirror is removed and identical measurements are done for an "empty" setup. The purpose of this measurement is to measure the signal when \emph{all} the incident light is transmitted, and \emph{no} light is reflected. This data is used to normalize the transmission intensities obtained in the first measurement. 
    \item On the former position of the Fano mirror, a highly reflective (HR) mirror is now placed, and all measurements are repeated. This corresponds to \emph{all} the incident light being reflected and \emph{no} light being transmitted. This data is used to normalize the reflection intensities obtained in the first measurement.
    \item Lastly, a measurement of the background signal is taken by simply blocking the laser before it enters the setup and repeating the measurements. 
\end{enumerate}

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/norm_ref_and_trans_M3.pdf}
    \caption{Normalized transmission and reflection spectra of a $400$ x $400 \mu m$ Fano mirror.}
    \label{fig:normalized_ref_trans_spectra}
\end{figure}

The normalized values are then given as
\begin{equation}
    T_{norm} = \frac{(T-bg)/(T_I-bg)}{(T^{\prime}-bg)/(T_I^{\prime}-bg)}
    \label{eq:normalized_transmission}
\end{equation}
for the transmission amplitudes, and
\begin{equation}
    R_{norm} = \frac{(R-bg)/(R_I-bg)}{(R^{\prime}-bg)/(R_I^{\prime}-bg)}
    \label{eq:normalized_reflectivity}
\end{equation}
for the reflection amplitudes. Here $T=|t|^2$ and $R=|r|^2$ denote the transmission and reflection intensities measured by $P_T$ and $P_R$ in step (1), $T^{\prime}$ and $R^{\prime}$ are the values measured for the transmission- and reflection intensities in steps (2) and (3), respectively. The subscript $I$ indicates values obtained by the incident detector $P_I$ for its corresponding measurement type. The background values obtained in step (4) are subtracted, these are labeled $bg$. Figure \ref{fig:normalized_ref_trans_spectra} shows an example of normalized spectra obtained by measurements (1)-(4) and calculations of eqs. (\ref{eq:normalized_transmission}) and (\ref{eq:normalized_reflectivity}).

